## Feature Model PK/SK Reference

| Model | Example PK | Example SK | PK | SK | Notes | File |
| --- | --- | --- | --- | --- | --- | --- |
| AttributeCode | `ATTRIBUTE_CODE#UUID` | `ATTRIBUTE_CODE` | `Partition::AttributeCode(<random code>)` | `EntityType::AttributeCode` | Created with random code; created_at indexed as GSI1 SK. | packages/main-api/src/features/did/models/attribute_code.rs |
| StoredDidDocument | `USER#{USER_ID}##DID` | `DID_DOCUMENT` | `CompositePartition(<user_pk>, Partition::Did)` | `EntityType::DidDocument` | `did` also stored/indexed via GSI1. | packages/main-api/src/features/did/models/stored_did_document.rs |
| VerifiedAttributes | `USER#{USER_ID}##ATTRIBUTES` | `VERIFIED_ATTRIBUTES` | `CompositePartition(<user_pk>, Partition::Attributes)` | `EntityType::VerifiedAttributes` | GSI1 prefixes for query by info. | packages/main-api/src/features/did/models/verified_attributes.rs |
| Notification | `NOTIFICATION#USER#{USER_ID}` | `NOTIFICATION#UUID` | `Partition::Notification(<user_pk as string>)` | `EntityType::Notification(<uuid>)` | GSI1/GSI2 mirror user_pk + created_at/status. | packages/main-api/src/features/notification/models/notification.rs |
| UserPayment | `USER#{USER_ID}##PAYMENT` | `CREATED#1720000000000` | `CompositePartition(<user_pk>, Partition::Payment)` | `EntityType::Created(<timestamp>)` | One per user; created_at timestamp embedded in SK. | packages/main-api/src/features/payment/models/user_payment.rs |
| UserPurchase | `USER#{USER_ID}##PURCHASE` | `USER_PURCHASE#UUID` | `CompositePartition(<user_pk>, Partition::Purchase)` | `EntityType::UserPurchase(<sorted_uuid>)` | GSI1 mirrors PK/SK with PAYMENT prefix. | packages/main-api/src/features/payment/models/user_purchase.rs |
| SpaceDiscussion | `SPACE#{SPACE_ID}` | `SPACE_DISCUSSION#UUID` | `<space_pk>` | `EntityType::SpaceDiscussion(<uuid>)` | Keys derived from space + generated id. | packages/main-api/src/features/spaces/discussions/models/space_discussion.rs |
| SpaceDiscussionMember | `DISCUSSION#{UUID}` | `SPACE_DISCUSSION_MEMBER#DISCUSSION#{UUID}#USER#{USER_ID}` | `<discussion_pk>` | `EntityType::SpaceDiscussionMember(<discussion_pk>, <user_pk>)` | User PK also indexed (GSI1). | packages/main-api/src/features/spaces/discussions/models/space_discussion_member.rs |
| SpaceDiscussionParticipant | `DISCUSSION#{UUID}` | `SPACE_DISCUSSION_PARTICIPANT#DISCUSSION#{UUID}#USER#{USER_ID}` | `<discussion_pk>` | `EntityType::SpaceDiscussionParticipant(<discussion_pk>, <user_pk>)` | Similar shape to member; user_pk indexed. | packages/main-api/src/features/spaces/discussions/models/space_discussion_participant.rs |
| SprintLeague | `SPACE#{SPACE_ID}` | `SPRINT_LEAGUE` | `<space_pk>` | `EntityType::SprintLeague` | Single aggregate row per space. | packages/main-api/src/features/spaces/sprint_leagues/models/sprint_league.rs |
| SprintLeaguePlayer | `SPACE#{SPACE_ID}` | `SPRINT_LEAGUE_PLAYER#0` | `<space_pk>` | `EntityType::SprintLeaguePlayer(<index>)` | Index provided on creation; votes stored on item. | packages/main-api/src/features/spaces/sprint_leagues/models/sprint_league_player.rs |
| SprintLeagueVote | `SPRINT_LEAGUE_VOTE#{SPACE_ID}` | `SPRINT_LEAGUE_VOTE#{USER_ID}` | `Partition::SprintLeagueVote(<space_id>)` | `EntityType::SprintLeagueVote(<user_id>)` | Derived from space/user partitions; created_at timestamp field. | packages/main-api/src/features/spaces/sprint_leagues/models/sprint_league_vote.rs |
| SpacePanels | `SPACE#{SPACE_ID}` | `SPACE_PANELS` | `<space_pk>` | `EntityType::SpacePanels` | Tracks total/remain quotas + attributes for space. | packages/main-api/src/features/spaces/panels/models/space_panels.rs |
| SpacePanelParticipant | `SPACE#{SPACE_ID}` | `SPACE_PANEL_PARTICIPANT#USER#{USER_ID}` | `<space_pk>` | `EntityType::SpacePanelParticipant(<user_pk>)` | space_pk and user_pk also exposed via GSIs. | packages/main-api/src/features/spaces/panels/models/space_panel_participant.rs |
| SpacePanelQuota | `SPACE#{SPACE_ID}##PANEL_ATTRIBUTE` | `SPACE_PANEL_ATTRIBUTE#Gender#Female` | `CompositePartition(<space_pk>, Partition::PanelAttribute)` | `EntityType::SpacePanelAttribute(<attr_label>, <attr_value>)` | Represents quota per panel attribute bucket. | packages/main-api/src/features/spaces/panels/models/space_panel_quota.rs |
| Poll | `SPACE#{SPACE_ID}` | `SPACE_POLL#UUID` | `<space_pk>` | `EntityType::SpacePoll(<uuid or provided>)` | Default SK uses sorted UUID; PK must be a space partition. | packages/main-api/src/features/spaces/polls/models/poll.rs |
| PollQuestion | `SPACE#{SPACE_ID}` | `SPACE_POLL_QUESTION` | `<space_pk>` | `EntityType::SpacePollQuestion` | Holds question list for a poll. | packages/main-api/src/features/spaces/polls/models/poll_question.rs |
| PollResult | `SPACE#{SPACE_ID}` | `SPACE_POLL_RESULT` | `<space_pk>` | `EntityType::SpacePollResult` | Created_at recorded for snapshot. | packages/main-api/src/features/spaces/polls/models/poll_result.rs |
| PollUserAnswer | `SPACE_POLL_USER_ANSWER#{USER_ID}` | `SPACE_POLL_USER_ANSWER#SPACE#{SPACE_ID}#POLL#p123` | `Partition::SpacePollUserAnswer(<user_id>)` | `EntityType::SpacePollUserAnswer(<space_pk>, <poll_pk>)` | created_at indexed; also stores respondent info. | packages/main-api/src/features/spaces/polls/models/poll_user_answer.rs |
| SpaceCommon | `SPACE#{SPACE_ID}` | `SPACE_COMMON` | `<space_pk>` | `EntityType::SpaceCommon` | Core space metadata row; created_at/visibility indexed. | packages/main-api/src/features/spaces/models/space_common.rs |
| SpaceParticipant | `SPACE#{SPACE_ID}##USER#{USER_ID}` | `SPACE_PARTICIPANT` | `CompositePartition(<space_pk>, <user_pk>)` | `EntityType::SpaceParticipant` (or `EntityType::SpaceInvitation` when inviting) | Stores participant user info; multiple GSIs on created_at/space_pk/user_pk. | packages/main-api/src/features/spaces/models/space_participant.rs |
| SpaceReport | `SPACE#{SPACE_ID}` | `SPACE_REPORT` | `<space_pk>` | `EntityType::SpaceReport` | Publish state indexed via GSI1. | packages/main-api/src/features/spaces/models/space_report.rs |
| SpaceRequirement | `SPACE#{SPACE_ID}##REQUIREMENT` | `SPACE_REQUIREMENT#PrePoll` | `CompositePartition(<space_pk>, Partition::Requirement)` | `EntityType::SpaceRequirement(<requirement_type>)` | related_pk/related_sk fields tie to prerequisite entity. | packages/main-api/src/features/spaces/models/space_requirement.rs |
| SpaceRecommendation | `SPACE#{SPACE_ID}` | `SPACE_RECOMMENDATION` | `<space_pk>` | `EntityType::SpaceRecommendation` | One per space for recommended content/files. | packages/main-api/src/features/spaces/recommendations/models/space_recommendation.rs |
| SpaceCategory | `SPACE#{SPACE_ID}` | `SPACE_CATEGORY#General` | `<space_pk>` | `EntityType::SpaceCategory(<name>)` | Category name embedded in SK. | packages/main-api/src/features/spaces/boards/models/space_category.rs |
| SpacePost | `SPACE#{SPACE_ID}` | `SPACE_POST#UUID` | `<space_pk>` | `EntityType::SpacePost(<uuid>)` | created_at/updated_at fields indexed for ordering; category stored separately. | packages/main-api/src/features/spaces/boards/models/space_post.rs |
| SpacePostComment | `SPACE_POST#post123` | `SPACE_POST_COMMENT#UUID` | `<space_post_pk>` | `EntityType::SpacePostComment(<uuid>)` or `EntityType::SpacePostCommentReply(<parent_id>, <uuid>)` | parent_id_for_likes + align fields support GSIs. | packages/main-api/src/features/spaces/boards/models/space_post_comment.rs |
| SpacePostCommentLike | `SPACE_POST_LIKE#post123` | `SPACE_POST_COMMENT_LIKE#{USER_ID}#UUID` | `Partition::SpacePostLike(<post_id>)` | `EntityType::SpacePostCommentLike(<user_id>, <comment_id>)` | created_at recorded; user_pk also present for GSI queries. | packages/main-api/src/features/spaces/boards/models/space_post_comment_like.rs |
| SpaceReward | `SPACE#{SPACE_ID}##REWARD` | `POLL#poll123#Respond` | `CompositePartition(<space_pk>, Partition::Reward)` | `RewardKey(<entity_type>, <reward_type>)` | Key helpers describe format `SPACE#{space_pk}##REWARD` / `{EntityType}#{RewardType}`. | packages/main-api/src/features/spaces/rewards/models/space_reward.rs |
| Reward | `REWARD` | `SPACE_REWARD` | `Partition::Reward` | `<RewardType>` | Global reward catalog keyed by reward type. | packages/main-api/src/features/spaces/rewards/models/reward.rs |
| UserReward | `USER_REWARD#{USER_ID}##SPACE#{SPACE_ID}` | `POLL#poll123#Respond` | `CompositePartition(UserRewardPartition(<user_id>), <space_pk>)` | `<RewardKey>` | Tracks per-user reward totals; PK builder uses user + space. | packages/main-api/src/features/spaces/rewards/models/user_reward.rs |
| UserRewardHistory | `USER_REWARD_HISTORY#{USER_ID}##SPACE#{SPACE_ID}` | `POLL#poll123#Respond#20251201` | `CompositePartition(UserRewardHistoryPartition(<user_id>), <space_pk>)` | `UserRewardHistoryKey(<RewardKey>, <time_key>)` | time_key derived from reward period (ONCE/dates/timestamp). | packages/main-api/src/features/spaces/rewards/models/user_reward_history.rs |
| SpaceFile | `SPACE#{SPACE_ID}` | `SPACE_FILE` | `<space_pk>` | `EntityType::SpaceFile` | Stores file list attached to space. | packages/main-api/src/features/spaces/files/models/space_file.rs |
| SpaceEmailVerification | `SPACE#{SPACE_ID}` | `SPACE_EMAIL_VERIFICATION#user@example.com` | `<space_pk>` | `EntityType::SpaceEmailVerification(<email>)` | created_at/expired_at tracked for verification lifecycle. | packages/main-api/src/features/spaces/members/models/space_email_verification.rs |
| SpaceInvitationMember | `SPACE#{SPACE_ID}` | `SPACE_INVITATION_MEMBER#USER#{USER_ID}` | `<space_pk>` | `EntityType::SpaceInvitationMember(<user_pk>)` | User PK also stored; status/created_at indexed via GSIs. | packages/main-api/src/features/spaces/members/models/space_invitation_member.rs |
| SpaceArtwork | `SPACE#{SPACE_ID}` | `SPACE_ARTWORK` | `<space_pk>` | `EntityType::SpaceArtwork` | Stores NFT metadata for space; timestamps recorded. | packages/main-api/src/features/spaces/artworks/models/space_artwork.rs |
| SpaceArtworkTrade | `SPACE#{SPACE_ID}` | `SPACE_ARTWORK_TRADE#0xTXHASH` | `<space_pk>` | `EntityType::SpaceArtworkTrade(<tx_hash>)` | trade_type distinguishes mint/transfer. | packages/main-api/src/features/spaces/artworks/models/space_artwork_trade.rs |
| Topic | `SPACE#{SPACE_ID}` | `TOPIC#Sports` | `<space_pk>` | `EntityType::Topic(<name>)` | Name also exposed via GSI prefixing. | packages/main-api/src/features/spaces/topics/models/topic.rs |
| TopicArticle | `SPACE#{SPACE_ID}` | `TOPIC_ARTICLE#Sports#UUID` | `<space_pk>` | `EntityType::TopicArticle(<topic_name>#<article_id>)` | created_at indexed; combined id includes topic. | packages/main-api/src/features/spaces/topics/models/topic_article.rs |
| TopicArticleReply | `SPACE#{SPACE_ID}` | `TOPIC_ARTICLE_REPLY#Sports#article123#UUID` | `<space_pk>` | `EntityType::TopicArticleReply(<topic_name>#<article_id>, <reply_id>)` | created_at indexed; parent_reply_id optional for threading. | packages/main-api/src/features/spaces/topics/models/topic_article_reply.rs |
| TelegramChannel | `TELEGRAM_CHANNEL` | `TELEGRAM_CHANNEL#123456789` | `Partition::TelegramChannel` | `EntityType::TelegramChannel(<chat_id>)` | chat_id identifies channel; timestamps currently zeroed in constructor. | packages/main-api/src/features/telegrams/models/telegram_channel.rs |
| Migration | `Membership` | `1` | `<MigrationDataType>` | `<version as string>` | Not a Partition-based PK; uses migration data type enum. | packages/main-api/src/features/migration/models/migration.rs |
| Membership | `MEMBERSHIP#Gold` | `MEMBERSHIP` | `Partition::Membership(<tier>)` | `EntityType::Membership` | Active memberships indexed with prefix ACTIVE in GSI1. | packages/main-api/src/features/membership/models/membership.rs |
| UserMembership | `USER#{USER_ID}` | `USER_MEMBERSHIP` | `<user_pk>` | `EntityType::UserMembership` | membership_pk stored separately; created_at/expired_at fields tracked. | packages/main-api/src/features/membership/models/user_membership.rs |
