use super::*;
use common::components::{TiptapEditor, Typo, Variant, Weight};

#[component]
pub fn ViewerPage(space_id: SpacePartition) -> Element {
    let mut content = use_signal(|| {
        r#"<section><h1>연구 개요</h1><ol><li><strong>연구 배경 및 필요성</strong><ul><li><strong>현안의 대두 및 입법 동향</strong><ul><li>강간죄 구성요건의 '동의 부재' 기준 전환에 대한 논의는 최근 몇 년 동안 활발히 이루어지고 있으며, 입법적 개입의 필요성이 제기되고 있다.</li><li>해당 입법 동향은 국내외적으로 성폭력 관련 법률의 개선 요구에 부응하는 것으로 해석된다.</li><li>관련 입법 움직임은 성범죄에 대한 사회적 인식 변화와 함께 제도적 대응의 필요성을 반영한다.</li></ul></li><li><strong>쟁점의 복합성과 갈등 구조</strong><ul><li>강간죄의 동의 기준 전환은 법적 정의, 증거 기준, 피해자 보호, 피의자 인권 등 다양한 쟁점을 내포하고 있다.</li><li>법안에 대한 찬반 의견은 주로 무고 우려와 피해자 보호의 균형을 중심으로 형성되어 있다.</li><li>해당 법안은 여러 이해관계자 간의 갈등을 불러일으키며, 이는 법률 제정 과정에서 중요한 고려 사항으로 작용한다.</li></ul></li><li><strong>정책 결정의 딜레마와 숙고된 여론의 필요성</strong><ul><li>법안 제정에 있어서 정책 입안자들은 무고 우려와 실제 피해자 보호 간의 균형을 맞추는 데 어려움을 겪고 있다.</li><li>따라서 입법 결정을 위해서는 숙고된 여론의 형성이 필수적이며, 이는 다양한 이해관계자의 참여를 통해 이루어져야 한다.</li><li>아래 표는 주요 이해관계자 그룹과 그들의 입장을 요약한 것이다.<table><tr><th>이해관계자</th><th>입장</th></tr><tr><td>법률 전문가</td><td>명확한 법적 정의와 증거 기준 마련 필요</td></tr><tr><td>성폭력 피해자 단체</td><td>강화된 피해자 보호 조치 요구</td></tr><tr><td>일반 시민</td><td>무고 우려 완화 및 법 집행의 공정성 확보 필요</td></tr></table></li></ul></li><li><strong>의제의 특성</strong><ul><li>해당 조사는 성폭력 관련 민감한 주제를 다루고 있으며, 참여자들의 심리적 안정을 고려한 접근 방식이 요구된다.</li><li>블록체인 기반의 익명성과 데이터 보호 기능을 활용하여 참여자의 개인정보를 보호한다.</li><li>DID 기반의 신원 인증 및 암호화 기술을 통해 조사 데이터의 위·변조를 방지한다.</li></ul></li><li><strong>조사 목적</strong><ul><li><strong>핵심 목적</strong><ul><li>입법 결정에 참고할 수 있는 과학적 여론 분석 자료를 제공하는 것이 주요 목적이다.</li><li>공정한 정보 제공과 숙고된 토론을 통해 여론의 형성과 변화를 분석한다.</li><li>블록체인 기술을 활용하여 익명성과 데이터 보호를 강화한다.</li></ul></li><li><strong>방법론적 혁신</strong><ul><li>블록체인 기반의 공론형 여론조사를 통해 익명성과 데이터 보호를 강화한다.</li><li>DID 기반의 신원 인증과 암호화 기술을 활용하여 조사 데이터의 신뢰성을 높인다.</li><li>분산형 데이터 관리 시스템을 통해 조사 과정의 투명성을 확보한다.</li></ul></li><li><strong>기대 성과</strong><ul><li>입법 결정의 합리적 참고자료로 활용 가능한 과학적 여론 분석 자료를 제공할 것으로 기대된다.</li><li>익명성과 데이터 보호를 강화함으로써 참여자의 심리적 안정을 도모할 것으로 예상된다.</li><li>블록체인 기술을 활용한 방법론적 혁신을 통해 조사의 신뢰성과 투명성을 높일 것으로 기대된다.</li></ul></li></ul></li></ol></section><section><h1>조사 설계 및 데이터 수집</h1><ol><li><strong>조사 설계</strong><ul><li><strong>개요</strong><ul><li>본 조사는 국회 입법조사처와 협력하여 진행하는 블록체인 기반 공론형 여론조사로, 강간죄 구성요건의 '동의 부재' 기준 전환에 대한 의견을 분석하는 데 목적이 있습니다.</li><li>조사는 공정한 정보 제공과 숙고된 토론을 통해 여론의 형성과 변화를 과학적으로 분석하고, 입법 결정의 합리적 참고자료로 활용하고자 합니다.</li><li>개인정보 보호 및 익명성은 DID 기반 보호, 암호화·분산형 관리, 익명 처리 및 연구 목적 사용, 블록체인 기록의 위·변조 방지로 보장됩니다.</li></ul></li></ul></li><li><strong>여론조사 진행 절차</strong><ul><li><strong>온라인 의견 조사</strong><ul><li>참여자들은 비동의 간음죄 도입에 대한 초기 의견을 온라인을 통해 제출합니다.</li><li>이 단계에서 수집된 데이터는 후속 토론을 위한 기초 자료로 사용됩니다.</li></ul></li><li><strong>정보 제공</strong><ul><li>참여자들에게 강간죄 구성요건 변경에 대한 자세한 정보와 관련 법률적 배경이 제공됩니다.</li><li>이러한 정보는 참여자들이 더 심도 있는 토론을 할 수 있도록 돕습니다.</li></ul></li><li><strong>비실시간 온라인 토의</strong><ul><li>참여자들은 제공된 정보를 바탕으로 비실시간으로 의견을 교환하고 토론합니다.</li><li>이 과정을 통해 참여자들은 자신의 의견을 다듬고, 다른 이들의 의견을 고려할 수 있습니다.</li></ul></li><li><strong>사후 온라인 의견 조사</strong><ul><li>토론 후 참여자들은 다시 한번 자신의 의견을 온라인으로 제출합니다.</li><li>이 단계에서의 의견은 토론을 거친 후의 여론을 반영합니다.</li></ul></li><li><strong>데이터 종합 분석</strong><ul><li>수집된 모든 데이터는 종합적으로 분석되어 여론의 형성과 변화를 파악합니다.</li><li>이 분석 결과는 입법 결정의 참고 자료로 활용됩니다.</li></ul></li></ul></li><li><strong>블록체인 기술 적용 방안</strong><ul><li><strong>DID</strong><ul><li>분산 ID(DID) 기술을 활용하여 참여자의 신원을 익명으로 보호합니다.</li><li>DID는 개인 정보를 안전하게 관리하고 익명성을 보장하는 데 중요한 역할을 합니다.</li></ul></li><li><strong>무결성 보장</strong><ul><li>블록체인의 특성을 활용하여 데이터의 무결성을 보장합니다.</li><li>모든 참여자의 의견과 토론 내용은 블록체인에 기록되어 변조 불가능합니다.</li></ul></li><li><strong>투명성 및 감사 가능성</strong><ul><li>블록체인의 투명성을 활용하여 조사 과정의 모든 단계를 감사 가능하게 만듭니다.</li><li>참여자들은 블록체인을 통해 조사 데이터의 투명성을 확인할 수 있습니다.</li></ul></li><li><strong>인센티브 지급 자동화/Smart Contract</strong><ul><li>스마트 컨트랙트를 통해 참여자에게 자동으로 인센티브를 지급합니다.</li><li>이는 참여자의 동기 부여와 공정한 보상 시스템을 제공합니다.</li></ul></li></ul></li><li><strong>분석 방법</strong><ul><li><strong>정량 분석</strong><ul><li>수집된 데이터를 통계적으로 분석하여 여론의 양적 변화를 파악합니다.</li><li>이 분석은 찬성, 반대, 유보 의견의 비율 등을 포함합니다.</li></ul></li><li><strong>정성 분석</strong><ul><li>참여자들의 의견과 토론 내용을 질적으로 분석하여 여론의 질적 변화를 파악합니다.</li><li>이 분석은 참여자들의 의견 변화의 이유와 배경을 분석합니다.</li></ul></li><li><strong>통합 분석</strong><ul><li>정량 분석과 정성 분석을 종합하여 여론의 전체적인 변화를 파악합니다.</li><li>이 통합 분석은 입법 결정에 대한 보다 포괄적인 통찰을 제공합니다.</li></ul></li><section><h1>분석 결과</h1><ol><li><strong>공론형 여론조사: 의견 변화 분석</strong><ul><li><strong>전체 의견 변화 추이</strong><ul><li>찬성, 반대, 유보 옵션 중 찬성 의견이 가장 많이 제시되었으며, 반대 의견이 그 뒤를 이었다.</li><li>유보 의견은 상대적으로 적게 나타났으나, 찬성과 반대 의견 간의 중립적인 입장을 반영하고 있다.</li><li>의견 변화는 특정 시점에서 큰 폭의 변동을 보이지 않고 상대적으로 안정적인 추이를 나타냈다.</li></ul></li></ul></li><li><strong>사전 설문 문항 분석</strong><ul><li>사전 설문 문항은 응답자들의 기본적인 의견 경향을 파악하는 데 중요한 역할을 하였다.</li><li>응답 결과, 찬성과 반대 의견이 거의 동률을 보이며 의견이 양분되어 있음을 알 수 있었다.</li><li>유보 의견의 비율은 상대적으로 낮았으나, 찬성과 반대 의견 간의 중간 지점을 차지하였다.</li></ul></li><li><strong>토론 내용 분석</strong><ul><li><strong>토론 분석_LDA</strong><ul><li>LDA 분석 결과, '동의'와 '무고'가 주요 키워드로 도출되었다.</li><li>'동의'는 토픽1에, '무고'는 토픽2에 각각 속하는 것으로 분석되었다.</li><li>토론에서 동의의 개념과 무고에 대한 우려가 주요 논의 주제로 떠올랐음을 알 수 있다.</li></ul></li><li><strong>토론 분석_TF-IDF</strong><ul><li>TF-IDF 분석 결과, '동의' 키워드의 중요도가 2.34로 가장 높게 나타났다.</li><li>'무고' 키워드의 중요도는 1.27로 상대적으로 낮았으나 여전히 중요한 논의 대상으로 인식되었다.</li><li>토론에서 동의의 개념이 무고보다 더 많은 관심을 받았음을 알 수 있다.</li></ul></li><li><strong>토론 분석_Text Network</strong><ul><li>텍스트 네트워크 분석 결과, '동의'와 '무고' 간의 연결 강도가 3으로 나타났다.</li><li>'동의' 노드의 betweenness centrality는 0.24, degree centrality는 0.82로 나타났다.</li><li>'무고' 노드의 betweenness centrality는 0.18, degree centrality는 0.6으로 나타났다.</li></ul></li><li><strong>통합 분석</strong><ul><li>LDA, TF-IDF, 텍스트 네트워크 분석을 종합하여 볼 때, 토론에서 동의와 무고가 주요 키워드로 떠올랐다.</li><li>동의의 개념에 대한 논의가 더 많은 비중을 차지했으며, 무고에 대한 우려 또한 중요한 논의 주제로 다뤄졌다.</li><li>참여자들은 동의의 명확한 기준 설정과 무고 방지를 위한 제도적 개선 방안에 대해 다양한 의견을 제시하였다.</li></ul></li></ul></li></ol></section><section><h1>결론 및 제언</h1><ol><li><strong>연구 결과 요약</strong><ul><li><strong>주요 키워드 분석</strong><ul><li>LDA 분석을 통해 '동의'와 '무고'가 주요 키워드로 도출되었다.</li><li>TF-IDF 분석에서도 '동의'가 2.34의 높은 가중치를 보여 연구의 핵심 주제임을 확인할 수 있다.</li><li>텍스트 네트워크 분석에서 '동의'와 '무고' 간의 연결 강도가 3으로 나타나, 이 두 키워드의 밀접한 관련성을 확인할 수 있다.</li></ul></li><li><strong>참여자 의견 분석</strong><ul><li>참여자들은 주로 무고 우려 완화, 동의 기준의 명확성, 증거 기준의 현실성, 동의 문화의 정착 등을 강조하였다.</li><li>예방 교육과 사후 지원 체계의 중요성도 언급되었으며, 법적 논의와 동시에 교육 및 캠페인의 병행 필요성이 제기되었다.</li><li>참여자들의 의견은 대체로 법적 개선과 사회적 인식 개선이 병행되어야 한다는 데 공감대를 형성하였다.</li></ul></li></ul></li><li><strong>블록체인 기반 공론조사 방법론의 가능성</strong><ul><li><strong>개인정보 보호 및 익명성</strong><ul><li>DID 기반 보호, 암호화·분산형 관리, 익명 처리 및 연구 목적 사용 등을 통해 개인정보 보호와 익명성이 효과적으로 보장되었다.</li><li>블록체인 기록의 위·변조 방지 기능은 조사 데이터의 신뢰성을 높이는 데 기여하였다.</li><li>참여자들은 개인정보 보호 및 익명성 보장에 대해 높은 신뢰를 보였으며, 이는 참여율과 의견의 다양성을 증가시키는 데 기여하였다.</li></ul></li><li><strong>공정한 정보 제공 및 숙고된 토론</strong><ul><li>공정한 정보 제공과 숙고된 토론을 통해 참여자들은 균형 잡힌 의견을 형성할 수 있었다.</li><li>블록체인 기반 공론조사는 참여자들에게 충분한 정보를 제공하고 숙고된 토론을 촉진함으로써 의견의 질을 향상시켰다.</li><li>이러한 방법론은 입법 결정의 합리적 참고자료로 활용될 수 있는 과학적 분석을 가능하게 하였다.</li></ul></li></ul></li></ol></section>"#.to_string()
    });

    let mut editable = use_signal(|| false);

    rsx! {
        div { class: "flex flex-col gap-4 flex-1 h-full",
            button { onclick: move |_| editable.toggle(), "변경" }
            div { "상태 : {editable}" }
            Typo { variant: Variant::H1, weight: Weight::Extrabold, "TIPTAP EDITOR" }
            TiptapEditor {
                class: "w-full h-full",
                content: content(),
                editable: editable(),
                placeholder: "Type here...",
                on_content_change: move |html: String| {
                    content.set(html);
                },
            }
        }
    }
}
