@import 'tailwindcss';
@import 'tw-animate-css';

@custom-variant light (&:where([data-theme=light], [data-theme=light] *));

/* ==========================================================================
   DESIGN TOKENS - CORE FOUNDATION
   ========================================================================== */

/* ----------------------------
   COLOR PALETTE (Raw values)
   NEVER use these directly in components
   ---------------------------- */
@theme static {
  /* Neutral grayscale */
  --gray-50: #ffffff;
  --gray-80: #6b6b6b;
  --gray-100: #fafafa;
  --gray-400: #a1a1a1;
  --gray-500: #737373;
  --gray-300: #d4d4d4;
  --gray-600: #525252;
  --gray-700: #404040;
  --gray-800: #262626;
  --gray-900: #171717;
  --gray-950: #0a0a0a;

  /* Base backgrounds */
  --bg-dark: #1d1d1d;
  --bg-component-dark: #191919;

  /* Brand colors */
  --brand-primary: #fcb300;
  --brand-secondary: #777677;

  /* Accent colors */
  --accent-pink: #db2780;
  --accent-pink-light: #ff9eee;
  --accent-green: #6eedd8;

  /* Special utilities */
  --pink-transparent-10: #db27801a;
  --blue-selection: #003366;

  /* UI-specific grays */
  --ui-gray-30: #aeaeae;
  --ui-gray-50: #777677;
  --ui-gray-70: #464646;
  --ui-gray-80: #323232;
  --ui-gray-cg-30: #aeb8b8;

  /* Static roles (don't change with theme) */
  --role-tag-static: #dee1e6;
  --role-mission-static: #dee1e6;
  --role-copyright-static: #9095a1;
}

/* ----------------------------
   SEMANTIC TOKENS (Dark theme defaults)
   These define the visual language of the application
   ---------------------------- */
@theme static {
  /* Core surfaces */
  --background: var(--bg-dark);
  --card: var(--bg-component-dark);
  --popover: #1a1a1a;

  /* Text hierarchy */
  --foreground: var(--gray-50);
  --foreground-muted: var(--gray-400);
  --foreground-more-muted: var(--gray-600);
  --foreground-inverted: var(--gray-50);
  --popover-foreground: #000203;
  --card-foreground: var(--gray-400);
  --card-foreground-muted: var(--gray-600);
  --card-foreground-more-muted: var(--gray-800);
  --card-meta: var(--gray-300);

  /* Actions and states */
  --primary: var(--brand-primary);
  --primary-foreground: #000000;
  --accent: var(--accent-green);
  --accent-foreground: #000000;
  --accent-hover: #282828;

  --destructive: var(--accent-pink);
  --destructive-foreground: #ffffff;

  /* Forms and inputs */
  --input: var(--ui-gray-80);
  --ring: var(--brand-primary);

  /* Borders and dividers */
  --border: var(--ui-gray-80);
  --border-separator: var(--gray-800);
  --border-subtle: #464646;

  /* Table styles */
  --table-bg: var(--bg-dark);
  --table-border: #444444;
  --table-header-bg: #2d2d2d;
  --table-header-fg: #f0f0f0;
  --table-row-bg: #1a1a1a;
  --table-row-alt-bg: #222222;
  --table-row-hover-bg: #222222;
  --table-cell-fg: #e0e0e0;
  --table-selection-bg: var(--blue-selection);

  /* ================================
     LEGACY TOKENS (Deprecated - for migration only)
     ================================ */
  --color-home-side: #ffffff;
  --color-home-side-text: #1d1d1d;
  --color-icon-hover: #ffffff;
  --color-reply-box: #262626;
  --color-create-space-bg: #1a1a1a;
  --color-create-space-border: #262626;
  --color-create-space-desc: #525252;
  --color-create-space-label: #a1a1a1;

  --color-space-box-bg: #191919;
  --color-space-box-border: var(--background);
  --color-button-border: #ffffff;
  --color-input-box-bg: #262626;
  --color-neutral-400: var(--foreground-muted);
  --color-neutral-500: var(--gray-500);
  --color-neutral-600: var(--foreground-more-muted);
  --color-foreground: var(--foreground);
  --color-background: var(--background);
  --color-component-bg: var(--card);
  --color-primary: var(--primary);
  --color-secondary: var(--brand-secondary);
  --color-supportive: var(--accent);
  --color-against: var(--accent-pink-light);
  --color-footer: var(--bg-component-dark);
  --color-tag: var(--role-tag-static);
  --color-mission-title: var(--role-mission-static);
  --color-btn-hover: var(--accent-hover);
  --color-tab-hover: var(--accent-hover);
  --color-web-bg: var(--gray-950);
  --color-copyright: var(--role-copyright-static);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-error: var(--destructive);

  --color-bg: #1d1d1d;
  --color-card-bg: #191919;
  --color-card-bg-secondary: #191919;
  --color-card-enable-border: #404040;
  --color-card-border: #191919;
  --color-card-border-secondary: #191919;
  --color-text-primary: #ffffff;
  --color-text-secondary: #f9fafb;
  --color-text-third: #171717;
  --color-profile-bg: #d9d9d9;
  --color-button-bg: #ffffff;
  --color-create-button-bg: #ffffff;
  --color-more-text: #a1a1a1;
  --color-follow-button-bg: #404040;
  --color-follow-button-text: #ffffff;
  --color-follow-button-bg-secondary: #ffffff;
  --color-follow-button-text-secondary: #000203;
  --color-follow-button-border: #ffffff;
  --color-unfollow-button-bg: #191919;
  --color-unfollow-button-text: #404040;
  --color-unfollow-button-border: #404040;
  --color-back-icon: #ffffff;
  --color-icon: #737373;
  --color-select-date-bg: #1a1a1a;
  --color-select-date-border: #262626;
  --color-select-booster-bg: #1a1a1a;

  --color-title-text: #d4d4d4;
  --color-desc-text: #d4d4d4;
  --color-time-text: #6d6d6d;
  --color-divider: #262626;
  --color-enable-button-bg: #fcb300;
  --color-enable-button-white-text: #ffffff;
  --color-enable-button-text: #000203;
  --color-disable-button-bg: var(--gray-600);
  --color-disable-button-white-text: #ffffff;
  --color-button-bg: #ffffff;
  --color-button-text: #18181b;

  --color-menu-text: #737373;
  --color-tab-label: #a1a1a1;
  --color-setting-card-border: #262626;
  --color-modal-card-bg: #1a1a1a;
  --color-modal-card-border: #262626;
  --color-modal-label-text: #a1a1a1;

  --color-label-color-bg: #1d1d1d;
  --color-label-color-border: #fcb300;
  --color-label-color-text: #fcb300;
  --color-label-color-bg-secondary: #ffffff;
  --color-label-color-border-secondary: #404040;
  --color-label-text: #ffffff;
  --color-input-box-bg: #1a1a1a;
  --color-input-box-border: #464646;
  --color-hover: #282828;
  --color-write-comment-box-bg: #262626;
  --color-write-comment-box-border: #404040;
  --color-write-comment-box-icon: #737373;
  --color-write-comment-box-text: #737373;
  --color-comment-icon: #aeaaab;
  --color-comment-icon-text: #a1a1a1;
  --color-comment-box-bg: #171717;
  --color-disabled-button-bg: #404040;
  --color-disabled-button-text: #737373;

  --color-cancel-button-bg: #1a1a1a;
  --color-cancel-button-text: #a1a1a1;
  --color-submit-button-bg: #fcb300;
  --color-submit-button-text: #1d1d1d;
  --color-space-side-label: #737373;
  --color-c-wg-70: var(--ui-gray-70);
}

/* ----------------------------
   LIGHT THEME OVERRIDES
   ---------------------------- */
[data-theme='light'] {
  /* Core surfaces */
  --background: var(--gray-50);
  --card: var(--gray-100);
  --popover: var(--gray-50);

  /* Text hierarchy */
  --foreground: var(--gray-800);
  --foreground-muted: var(--gray-600);
  --foreground-more-muted: var(--gray-400);
  --foreground-inverted: var(--gray-700);
  --popover-foreground: #000203;
  --card-foreground: var(--gray-800);
  --card-foreground-muted: var(--gray-600);
  --card-foreground-more-muted: var(--gray-400);
  --card-meta: var(--gray-600);

  /* Actions and states */
  --accent-hover: #e5e5e5;

  /* Forms and inputs */
  --input: #e0e0e0;
  --border: var(--table-light-border);

  /* Borders and dividers */
  --border-separator: #e5e5e5;
  --border-subtle: var(--gray-700);

  /* Table styles */
  --table-bg: var(--gray-50);
  --table-border: var(--table-light-border);
  --table-header-bg: var(--gray-100);
  --table-header-fg: #333333;
  --table-row-bg: var(--gray-50);
  --table-row-alt-bg: var(--gray-100);
  --table-row-hover-bg: var(--table-light-hover);
  --table-cell-fg: #333333;
  --table-selection-bg: var(--table-light-selection);

  /* ================================
     LEGACY TOKEN OVERRIDES
     ================================ */
  --color-home-side: #fcb300;
  --color-home-side-text: #262626;

  --color-icon-hover: #e5e5e5;
  --color-reply-box: #ffffff;
  --color-create-space-bg: #fafafa;
  --color-create-space-border: #d4d4d4;
  --color-create-space-desc: #525252;
  --color-create-space-label: #a1a1a1;

  --color-space-box-bg: #ffffff;
  --color-space-box-border: #e5e5e5;
  --color-button-border: #e5e5e5;
  --color-foreground: var(--foreground);
  --color-background: var(--background);
  --color-component-bg: var(--card);
  --color-custom-white: var(--gray-800);
  --color-neutral-900: var(--gray-50);
  --color-neutral-400: var(--foreground-more-muted);

  --color-footer: var(--gray-900);
  --color-btn-hover: var(--accent-hover);
  --color-tab-hover: var(--accent-hover);

  --color-bg: #f5f5f5;
  --color-card-bg: #fafafa;
  --color-card-bg-secondary: #ffffff;
  --color-card-enable-border: #e5e5e5;
  --color-card-border: #e5e5e5;
  --color-card-border-secondary: #e5e5e5;
  --color-text-primary: #262626;
  --color-text-secondary: #262626;
  --color-text-third: #262626;
  --color-profile-bg: #d9d9d9;
  --color-button-bg: #fcb300;
  --color-more-text: #737373;
  --color-follow-button-bg: #404040;
  --color-follow-button-text: #ffffff;
  --color-follow-button-bg-secondary: #fcb300;
  --color-follow-button-text-secondary: #000203;
  --color-follow-button-border: #fcb300;
  --color-unfollow-button-bg: #ffffff;
  --color-unfollow-button-text: #000203;
  --color-unfollow-button-border: #000203;
  --color-title-text: #262626;
  --color-desc-text: #525252;
  --color-time-text: #6d6d6d;
  --color-divider: #e5e5e5;
  --color-enable-button-bg: #fcb300;
  --color-enable-button-white-text: #ffffff;
  --color-enable-button-text: #000203;
  --color-disable-button-bg: var(--gray-600);
  --color-disable-button-white-text: #ffffff;
  --color-button-bg: #f5f5f5;
  --color-create-button-bg: #fcb300;
  --color-button-text: #18181b;
  --color-menu-text: #737373;
  --color-tab-label: #a1a1a1;
  --color-setting-card-border: #e5e5e5;
  --color-modal-card-bg: #fafafa;
  --color-modal-card-border: #d4d4d4;
  --color-modal-label-text: #a1a1a1;
  --color-back-icon: #737373;
  --color-icon: #737373;
  --color-select-date-bg: #f5f5f5;
  --color-select-date-border: #d4d4d4;
  --color-select-booster-bg: #fafafa;

  --color-label-color-bg: #fcb300;
  --color-label-color-border: #fcb300;
  --color-label-color-text: #ffffff;
  --color-label-color-bg-secondary: #ffffff;
  --color-label-color-border-secondary: #404040;
  --color-label-text: #404040;
  --color-input-box-bg: #fafafa;
  --color-input-box-border: #e5e5e5;
  --color-hover: #e5e5e5;
  --color-write-comment-box-bg: #e5e5e5;
  --color-write-comment-box-border: #d4d4d4;
  --color-write-comment-box-icon: #737373;
  --color-write-comment-box-text: #a3a3a3;
  --color-comment-icon: #737373;
  --color-comment-icon-text: #404040;
  --color-comment-box-bg: #ffffff;
  --color-disabled-button-bg: #d9d9d9;
  --color-disabled-button-text: var(--gray-600);

  --color-cancel-button-bg: #ffffff;
  --color-cancel-button-text: #a3a3a3;
  --color-submit-button-bg: #fcb300;
  --color-submit-button-text: #1d1d1d;
  --color-space-side-label: #262626;
}

/* Light theme scrollbar overrides */
[data-theme='light'] {
  scrollbar-color: var(--gray-400) transparent;
}

[data-theme='light'] *::-webkit-scrollbar-thumb {
  background-color: var(--gray-400);
}

[data-theme='light'] *::-webkit-scrollbar-thumb:hover {
  background-color: var(--gray-500);
}

/* ----------------------------
   LAYOUT TOKENS
   ---------------------------- */
@theme static {
  --breakpoint-desktop: 1177px;
  --breakpoint-tablet: 900px;
  --breakpoint-mobile: 500px;
  --breakpoint-sm-mobile: 380px;

  --container-desktop: 1177px;
  --container-tablet: 900px;
  --container-mobile: 500px;
  --container-sm-mobile: 380px;
}

/* ----------------------------
   LEGACY ALIASES (Avoid using in new code)
   ---------------------------- */
@theme static {
  --color-custom-white: var(--foreground);
  --color-neutral-900: var(--background);
  --color-neutral-80: var(--gray-80);
  --color-neutral-400: var(--gray-400);
  --color-neutral-500: var(--gray-500);
  --color-neutral-600: var(--gray-600);
  --color-neutral-700: var(--gray-700);
  --color-neutral-800: var(--gray-800);
}

/* ==========================================================================
   GLOBAL STYLES
   ========================================================================== */

html {
  background-color: var(--background);
  color: var(--foreground-muted);
}

/* Modern macOS-style scrollbar */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--ui-gray-70) transparent;
}

*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: transparent;
}

*::-webkit-scrollbar-thumb {
  background-color: var(--ui-gray-70);
  border-radius: 4px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

*::-webkit-scrollbar-thumb:hover {
  background-color: var(--ui-gray-50);
}

*::-webkit-scrollbar-corner {
  background: transparent;
}

.hide-scrollbar {
  overflow-x: scroll;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

button,
a {
  @apply cursor-pointer;
}

:root {
  --header-height: 88px;
}

@media (max-width: 500px) {
  :root {
    --header-height: 54px;
  }
}

/* ==========================================================================
   COMPONENT STYLES
   ========================================================================== */

/* ----------------------------
   Table (ProseMirror / Tiptap)
   ---------------------------- */
.tiptap-table {
  border-collapse: collapse;
  width: 100%;
  margin: 1rem 0;
  overflow: hidden;
  box-shadow: 0 0 0 1px var(--table-border);
}

.tiptap-table-header {
  background-color: var(--table-header-bg) !important;
  color: var(--table-header-fg) !important;
  font-weight: 600;
  text-align: left;
  border: 1px solid var(--table-border) !important;
  padding: 10px 12px;
}

.tiptap-table-cell {
  background-color: var(--table-row-bg) !important;
  color: var(--table-cell-fg) !important;
  border: 1px solid var(--table-border) !important;
  padding: 8px 12px;
  vertical-align: top;
}

.tiptap-table-row:nth-child(even) .tiptap-table-cell {
  background-color: var(--table-row-alt-bg) !important;
}

.tiptap-table .selectedCell {
  background-color: var(--table-selection-bg) !important;
}

.tiptap-table-row:hover .tiptap-table-cell {
  background-color: var(--table-row-hover-bg) !important;
}

/* ----------------------------
   UI Components
   ---------------------------- */
.sidemenu-link {
  @apply flex flex-row items-center gap-1 px-1 py-2 rounded-md font-bold text-sm;

  &:hover {
    background-color: var(--accent-hover);
  }
}

.med-16 {
  @apply font-medium text-base/[24px] align-middle tracking-[0.5px];
}

.feed-content h2 {
  @apply text-base font-bold mb-2 mt-4;
  color: var(--foreground);
}

.rule-with-text {
  display: flex;
  align-items: center;
  text-align: center;
  color: var(--ui-gray-30);
  font-size: 14px;
}

.rule-with-text::before,
.rule-with-text::after {
  content: '';
  flex: 1;
  border-top: 1px solid var(--ui-gray-80);
  margin: 0 1rem;
}

/* ----------------------------
   Utilities
   ---------------------------- */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.ProseMirror ul {
  list-style-type: disc;
  padding-left: 1.5rem;
}
.ProseMirror ol {
  list-style-type: decimal;
  padding-left: 1.5rem;
}

/* Toast overrides */
.custom-toast-wrapper {
  background: transparent !important;
  box-shadow: none !important;
  padding: 0 !important;
}
.custom-toast-body {
  padding: 0 !important;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.momentum {
  -webkit-overflow-scrolling: touch;
}

/* ==========================================================================
   TAILWIND UTILITIES FOR SEMANTIC TOKENS
   ========================================================================== */
@layer utilities {
  /* Text colors */
  .text-text-primary {
    color: var(--foreground);
  }
  .text-text-primary-muted {
    color: var(--foreground-muted);
  }
  .text-text-primary-more-muted {
    color: var(--foreground-more-muted);
  }
  .text-popover-foreground {
    color: var(--popover-foreground);
  }
  .text-text-primary-inverted {
    color: var(--foreground-inverted);
  }
  .text-card-meta {
    color: var(--card-meta);
  }

  .text-card-more-muted {
    color: var(--card-foreground-more-muted);
  }

  /* Background colors */
  .bg-popover {
    background-color: var(--popover);
  }
  .bg-card {
    background-color: var(--card);
  }
  .bg-card-foreground {
    background-color: var(--card-foreground);
  }
  .bg-card-foreground-muted {
    background-color: var(--card-foreground-muted);
  }
  .bg-card-foreground-more-muted {
    background-color: var(--card-foreground-more-muted);
  }
  .bg-accent {
    background-color: var(--accent);
  }

  /* Border colors */
  .border-separator {
    border-color: var(--border-separator);
  }
  .border-subtle {
    border-color: var(--border-subtle);
  }
}
